var e=Object.defineProperty,t=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,r=(t,l,n)=>l in t?e(t,l,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[l]=n;"undefined"!=typeof require&&require;import{l as o,y as a,_ as c,D as s,v as i,r as u,L as d,R as g,a as v,S as p}from"./vendor.503f37f3.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const l of e)if("childList"===l.type)for(const e of l.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const h=e=>{const[t,l]=o((()=>localStorage.getItem(e))),n=()=>{const n=localStorage.getItem(e);n!==t&&l(n)};return a((()=>{const t=t=>{t.storageArea===localStorage&&t.key===e&&l(t.newValue)},r=t=>{t.detail.key===e&&n()};return window.addEventListener("storage",t),window.addEventListener("customStorageChange",r),()=>{window.removeEventListener("storage",t),window.removeEventListener("customStorageChange",r)}})),a((()=>{t?localStorage.setItem(e,t):localStorage.removeItem(e),window.dispatchEvent(new CustomEvent("customStorageChange",{detail:{key:e}})),n()}),[e,t]),[t,l]},f=new c,m=s({}),w=({children:e})=>{const[t,l]=o({currentSlot:null,schedule:null,overwriteMessage:null,now:new Date}),[n,r]=o([]),[c]=h("schedule_id"),[s]=h("live_schedule"),[u]=h("overwrite_schedule");h("prefer_system_time");return a((()=>(c?f.getSingleSchedule(c,"true"===s,null!=u?u:void 0).then((e=>{const t=setInterval((()=>(e=>{if(!e)return;const t=f.computeAll(e,f.getSystemTime());if(!t)return alert("Failure to generate now, please report to vlad!"),l({schedule:e,now:new Date,overwriteMessage:"Failed to generate current slot",currentSlot:null});l({schedule:e,currentSlot:t.currentSlot,overwriteMessage:t.overwriteMessage,now:new Date})})(e)),250);r([...n,t])})).catch((()=>{alert("Failed to load schedule")})):l({schedule:null,currentSlot:null,overwriteMessage:"Please select a schedule in the settings menu",now:new Date}),()=>{n.forEach((e=>{clearInterval(e)}))})),[c,s]),i(m.Provider,{value:t},e)},y=e=>o=>{var a=((e,r)=>{var o={};for(var a in e)l.call(e,a)&&r.indexOf(a)<0&&(o[a]=e[a]);if(null!=e&&t)for(var a of t(e))r.indexOf(a)<0&&n.call(e,a)&&(o[a]=e[a]);return o})(o,[]);return i(m.Consumer,null,(o=>i(e,((e,o)=>{for(var a in o||(o={}))l.call(o,a)&&r(e,a,o[a]);if(t)for(var a of t(o))n.call(o,a)&&r(e,a,o[a]);return e})({data:o},a))))};new c;var x=y((({display:e,data:t})=>{const{overwriteText:l,counter:n}=(e=>{if(e.overwriteMessage)return{overwriteText:e.overwriteMessage,counter:null};if(!e.currentSlot)return console.log("no data",e),{overwriteText:"Loading...",counter:null};const{overwriteMessage:t,currentSlot:l}=e;return{overwriteText:t,counter:l}})(t);return i(e,{end:n,overwriteText:l})}));var b=y((({display:e,data:t})=>{var l;let n;return n=(null==(l=t.currentSlot)?void 0:l.eventName)?t.currentSlot.eventName:t.overwriteMessage?t.overwriteMessage:"Loading...",i(e,{text:n})}));const k=({children:e})=>i("div",{class:"text-center flex flex-col min-h-screen items-center justify-center p-[20px]"},e),S=({children:e})=>i("div",{class:"flex flex-row justify-between items-stretch"},e),_=({children:e,location:t,isSticky:l=!1})=>i("div",{class:`${l?"fixed":"absolute"} top-[13px] ${"right"===t?"right-[13px]":""} ${"left"===t?"left-[13px]":""}`},e),O=({text:e,children:t,subtext:l})=>i("div",{class:"pb-[40px]"},i("h2",{class:"text-[30px] font-bold "+(l?"":"pb-[10px]")},e),l?i("p",{class:"pb-[10px]"},l):null,i("div",{class:"text-center flex flex-col items-center justify-center space-y-[10px]"},t)),C=({icon:e,alt:t,url:l})=>i("img",{src:e,alt:t,class:"w-[30px] h-[30px]",onClick:()=>{l&&u(l,!1)}}),L=({children:e})=>i("div",{class:"flex flex-row items-center justify-center space-x-1"},e),E=({children:e,color:t})=>i("div",{style:{backgroundColor:t}},e);var I="_gradient_1v12f_1";const N=({children:e})=>i("div",{class:I},e);var j="_scaleoGifHigh_ufwe0_5",B="_scaleoGifPreset_ufwe0_17";const M=({children:e})=>i("div",{class:`${B} ${j}`},e),P=({children:e})=>{var t;const{background:l}=(()=>{const[e]=h("background");return{background:e?JSON.parse(e):null}})();switch(null==l?void 0:l.background){case"color":return i(E,{color:null==(t=l.data)?void 0:t.color},e);case"gradient":return i(N,null,e);case"scaleo":return i(M,null,e);default:return i(E,{color:"#282c34"},e)}},T=new c,J=({end:e,overwriteText:t})=>{const[l,n]=o(""),r=()=>{if(!e)return n(t);n(T.generateCountdownTextFull(t,T.computeEndDate(e)))};return a((()=>{r();const e=setInterval(r,1e3);return()=>{clearInterval(e)}})),i("p",{class:"text-[80px] pb-[10px] text-white"},l)};var D=y((({data:e})=>i("p",{class:"text-[20px] pt-[5px] text-white"},e.now.toLocaleString())));const F=({text:e})=>i("p",{class:"text-[25px] text-white"},e),$=()=>i(P,null,i(S,null,i(_,{location:"left"},i(C,{icon:"/assets/cog-solid.a1bf6849.svg",alt:"Settings",url:"/settings"})),i(_,{location:"right"},i(D,null))),i(k,null,i(x,{display:J}),i(b,{display:F}))),A=()=>i("div",{class:"text-center"},i("h1",null,"Error 404"),i("p",null,"That page doesn't exist."),i("h4",null,"Back to"," ",i(d,{href:"/",class:"text-blue-600"},"Home")));const G=new c,q=()=>{var e;const[t,l]=o(null),[n,r]=o(null),[c,s]=h("schedule_id"),[,u]=h("live_schedule"),[d,g]=h("overwrite_schedule");return a((()=>{G.getAllSchedules().then((e=>{const t={};e.forEach((e=>{t[e.group]||(t[e.group]=[]),t[e.group].push(e)})),l(t)})).catch((()=>{console.log("Failed to fetch data")})),c?G.getOverwriteSchedules(c).then((e=>{r(e)})).catch((()=>{console.log("failed loading")})):r({error:!0,message:"Please select a schedule first"})}),[]),i("div",null,i("select",{onChange:e=>{var t;s(null==(t=e.target)?void 0:t.value),localStorage.removeItem("overwrite_schedule"),window.location.reload()}},null===c?i("option",{selected:!0,value:void 0},"Please select a schedule"):null,t?Object.keys(t).map((e=>{var l;return i("optgroup",{label:e,key:e},null==(l=t[e])?void 0:l.map((e=>i("option",{key:e.id,selected:c===e.id,value:e.id},e.name))))})):i("option",null,"Loading")),i("br",null),i("br",null),i("p",null,"Overwrite current schedule with a special schedule (i.e. early dismissal), (disables live schedule option)"),i("select",{onChange:e=>{var t;const l=null==(t=e.target)?void 0:t.value;"none"===l?localStorage.removeItem("overwrite_schedule"):(u("false"),g(l)),window.location.reload()}},(null==n?void 0:n.error)?i("option",{selected:!0,value:void 0},null!=(e=n.message)?e:"Unknown error"):null,(null==n?void 0:n.available)?i("option",{key:"none",selected:!d,value:"none"},"Use normal schedule"):null,(null==n?void 0:n.available)?n.available.map((e=>i("option",{key:e.id,selected:d===e.id,value:e.id},e.name))):n?null:i("option",null,"Loading...")))},H=({background:e,setBackground:t})=>{var l,n;const r=e?JSON.parse(e):null,[a,c]=o(null!=(n=null==(l=null==r?void 0:r.data)?void 0:l.color)?n:"#282c34"),s="color"===(null==r?void 0:r.background);return i(L,null,i("input",{type:"radio",checked:s,onChange:e=>{var l;"on"===(null==(l=e.target)?void 0:l.value)&&t(JSON.stringify({background:"color",data:{color:a}}))}}),i("input",{type:"color",value:a,onChange:e=>{t(JSON.stringify({background:"color",data:{color:e.target.value}})),c(e.target.value)}}),i("p",null,"Custom Color"))},U=({background:e,setBackground:t})=>{const l=e?JSON.parse(e):null,n="gradient"===(null==l?void 0:l.background);return i(L,null,i("input",{type:"radio",checked:n,onChange:e=>{var l;"on"===(null==(l=e.target)?void 0:l.value)&&t(JSON.stringify({background:"gradient"}))}}),i("p",null,"Gradient"))},z=({background:e,setBackground:t})=>{const l=e?JSON.parse(e):null,n="scaleo"===(null==l?void 0:l.background);return i(L,null,i("input",{type:"radio",checked:n,onChange:e=>{var l;"on"===(null==(l=e.target)?void 0:l.value)&&t(JSON.stringify({background:"scaleo"}))}}),i("p",null,"Scaleo"))},K=()=>{const[e,t]=h("background");return i("div",null,i(H,{background:e,setBackground:t}),i("p",null,"or"),i(U,{background:e,setBackground:t}),i("p",null,"or"),i(z,{background:e,setBackground:t}))},R=()=>{const[e,t]=h("live_schedule");return i("div",null,i(L,null,i("input",{type:"checkbox",checked:"true"===e,onChange:e=>{var l;const n=null==(l=e.target)?void 0:l.checked.toString();console.log(n),localStorage.removeItem("overwrite_schedule"),t(n),window.location.reload()}}),i("p",null,"Live Schedule")),i("p",null,"Schedule updates are downloaded automatically for days with early dismissals / delayed starts / etc."," "))},V=()=>{const[e,t]=h("prefer_system_time");return i("div",null,i(L,null,i("input",{type:"checkbox",checked:"true"===e,onChange:e=>{var l;const n=null==(l=e.target)?void 0:l.checked.toString();t(n),window.location.reload()}}),i("p",null,"Prefer system time")),i("p",null,"On some computers, Day Light Savings might not be set correctly. By toggling this option, the system time will be used over the DST adjusted time."))},Q=()=>i("div",null,i(S,null,i(_,{location:"right",isSticky:!1},i(C,{icon:"/assets/times-solid.115f5fad.svg",alt:"Go Back",url:"/"}))),i(k,null,i(O,{text:"Select a Schedule"},i(q,null)),i(O,{text:"Styling / Background"},i(K,null)),i(O,{text:"Experimental",subtext:"Features that are not finalized (but functional)"},i(R,null),i("br",null),i(V,null))));p(i((()=>i(w,null,i(g,null,i(v,{path:"/",component:$}),i(v,{path:"/settings",component:Q}),i(v,{default:!0,component:A})))),null),document.getElementById("app"));